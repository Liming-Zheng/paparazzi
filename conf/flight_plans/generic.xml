<flight_plan ALT="450" GROUND_ALT="400" LAT0="43.4624" LON0="1.2727" MAX_DIST_FROM_HOME="500" NAME="Generic" QFU="270" SECURITY_HEIGHT="25">
  <dl_settings>
    <dl_settings NAME="flight params">
      <dl_setting MAX="2" MIN="0" STEP="1" VAR="light_mode"/>
      <dl_setting MAX="1000" MIN="-50" STEP="10" VAR="altitude_shift"/>
    </dl_settings>
    <dl_settings NAME="mode">
      <dl_setting MAX="1." MIN="0." STEP="1" VAR="z_constrast_mode"/>
      <dl_setting MAX="1." MIN="0." STEP="1" VAR="rate_mode"/>
      <dl_setting MAX="2" MIN="0" STEP="1" VAR="pprz_mode"/>
      <dl_setting MAX="1" MIN="0" STEP="1" VAR="launch"/>
    </dl_settings>
    <dl_settings NAME="control">
      <dl_settings NAME="attitude">
        <dl_setting MAX="0.3" MIN="-0.3" STEP="0.01" VAR="ir_roll_neutral"/>
        <dl_setting MAX="0.5" MIN="-0.3" STEP="0.01" VAR="ir_pitch_neutral"/>
        <dl_setting MAX="15000" MIN="1000" STEP="250" VAR="roll_pgain"/>
        <dl_setting MAX="15000" MIN="1000" STEP="250" VAR="pitch_pgain"/>
        <dl_setting MAX="1" MIN="0" STEP="0.01" VAR="pitch_of_roll"/>
        <dl_setting MAX="1" MIN="0" STEP="0.01" VAR="pitch_of_vz"/>
      </dl_settings>

      <dl_settings name="rate_loop">
        <dl_setting MAX="2000." MIN="0." STEP="1.0" VAR="roll_rate_pgain"/>
        <dl_setting MAX="100" MIN="10" STEP="1" VAR="attitude_pgain"/>
      </dl_settings>

      <dl_settings name="nav">
        <dl_setting MAX="0.7" MIN="0.3" STEP="0.05" VAR="climb_level_gaz"/>
        <dl_setting MAX="-0.01" MIN="-0.1" STEP="0.01" VAR="climb_pgain"/>
        <dl_setting MAX="-0.1" MIN="-2" STEP="0.05" VAR="course_pgain"/>
      </dl_settings>
    </dl_settings>
  </dl_settings>
  <waypoints>
    <waypoint NAME="HOME" X="0" Y="0"/>
    <waypoint NAME="1" X="200" Y="0"/>
    <waypoint NAME="2" X="0" Y="200"/>
    <waypoint ALT="450." NAME="S1" X="-181.37499716" Y="122.374998203"/>
    <waypoint ALT="450." NAME="S2" X="136.75000196" Y="308.874998301"/>
  </waypoints>
  <blocks>
    <block NAME="wait GPS">
      <while COND="!GPS_FIX_VALID(gps_mode)"/>
    </block>
    <block NAME="init">
      <while COND="10 > block_time"/>
      <set VALUE="reset_nav_reference()" VAR="unit"/>
      <set VALUE="reset_waypoints()" VAR="unit"/>
      <deroute BLOCK="circlehome"/>
    </block>
    <block NAME="circlehome">
      <circle RADIUS="75" WP="HOME"/>
    </block>
    <block NAME="circlehome pitch">
      <circle RADIUS="75" WP="HOME" gaz="0.6" pitch="auto"/>
    </block>
    <block name="att20">
      <attitude gaz="0.5" roll="20" until="FALSE" vmode="gaz"/>
    </block>
    <block name="att30">
      <attitude gaz="0.5" roll="30" until="FALSE" vmode="gaz"/>
    </block>
    <block name="climb0_att">
      <attitude climb="0" roll="0" until="block_time > 20" vmode="climb"/>
      <deroute block="circlehome"/>
    </block>
    <block name="climb1_att">
      <attitude climb="1" roll="0" until="block_time > 20" vmode="climb"/>
      <deroute block="circlehome"/>
    </block>
    <block name="climb0">
      <go climb="0" vmode="climb" wp="1"/>
      <deroute block="circlehome"/>
    </block>
    <block name="climb1">
      <go climb="1" vmode="climb" wp="1"/>
      <deroute block="circlehome"/>
    </block>
    <block NAME="stack 1">
      <circle RADIUS="75" WP="1"/>
    </block>
    <block NAME="route12">
      <go approaching_time="0" from="1" hmode="route" wp="2"/>
      <deroute block="stack 2"/>
    </block>
    <block NAME="route21">
      <go approaching_time="0" from="2" hmode="route" wp="1"/>
      <deroute block="stack 1"/>
    </block>
    <block NAME="stack 2">
      <circle RADIUS="75" WP="2"/>
    </block>
    <block NAME="survey">
      <survey_rectangle GRID="150" WP1="S1" WP2="S2"/>
    </block>
  </blocks>
</flight_plan>
