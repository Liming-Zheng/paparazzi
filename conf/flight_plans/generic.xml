<flight_plan ALT="450" GROUND_ALT="400" LAT0="43.4624" LON0="1.2727" MAX_DIST_FROM_HOME="1000" NAME="Generic" QFU="270" SECURITY_HEIGHT="25">
  <waypoints>
    <waypoint NAME="HOME" X="0" Y="0"/>
    <waypoint NAME="1" X="200" Y="0"/>
    <waypoint NAME="2" X="0" Y="200"/>
    <waypoint ALT="450." NAME="S1" X="-181.37499716" Y="122.374998203"/>
    <waypoint ALT="450." NAME="S2" X="136.75000196" Y="308.874998301"/>
  </waypoints>

  <blocks>
    <block NAME="wait GPS">
      <while COND="!GPS_FIX_VALID(gps_mode)"/>
    </block>
    <block NAME="init">
      <while COND="10 > block_time"/>
      <set VALUE="reset_nav_reference()" VAR="unit"/>
      <set VALUE="reset_waypoints()" VAR="unit"/>
      <deroute BLOCK="circlehome"/>
    </block>
    <block NAME="circlehome">
      <circle RADIUS="75" WP="HOME"/>
    </block>
    <block NAME="circle left home">
      <circle RADIUS="-75" WP="HOME"/>
    </block>
    <block NAME="circlehome pitch">
      <circle RADIUS="75" WP="HOME" gaz="0.6" pitch="auto"/>
    </block>
    <block name="att20">
      <attitude gaz="0.5" roll="20" until="FALSE" vmode="gaz"/>
    </block>
    <block name="att30">
      <attitude gaz="0.5" roll="30" until="FALSE" vmode="gaz"/>
    </block>
    <block name="climb0_att">
      <attitude climb="0" roll="0" until="block_time > 20" vmode="climb"/>
      <deroute block="circlehome"/>
    </block>
    <block name="climb1_att">
      <attitude climb="1" roll="0" until="block_time > 20" vmode="climb"/>
      <deroute block="circlehome"/>
    </block>
    <block name="climb0">
      <go climb="0" vmode="climb" wp="1"/>
      <deroute block="circlehome"/>
    </block>
    <block name="climb1">
      <go climb="1" vmode="climb" wp="1"/>
      <deroute block="circlehome"/>
    </block>
    <block NAME="stack 1">
      <circle RADIUS="75" WP="1"/>
    </block>
    <block NAME="route12">
      <go approaching_time="0" from="1" hmode="route" wp="2"/>
      <deroute block="stack 2"/>
    </block>
    <block NAME="route21">
      <go approaching_time="0" from="2" hmode="route" wp="1"/>
      <deroute block="stack 1"/>
    </block>
    <block NAME="stack 2">
      <circle RADIUS="75" WP="2"/>
    </block>
    <block NAME="survey">
      <survey_rectangle GRID="150" WP1="S1" WP2="S2"/>
    </block>
  </blocks>
</flight_plan>
