<!DOCTYPE flight_plan SYSTEM "flight_plan.dtd">

<flight_plan NAME="Example" LON0="???" MAX_DIST_FROM_HOME="???" GROUND_ALT="???" SECURITY_HEIGHT="25" QFU="???" ALT="???" LAT0="???">
  <rc_control>
    <mode NAME="AUTO1">
      <setting VAR="ir_pitch_neutral" RANGE="60." RC="gain_1_up" TYPE="int16"/>
      <setting VAR="ir_roll_neutral" RANGE="-60." RC="gain_1_down" TYPE="int16"/>
    </mode>
    <mode NAME="AUTO2">
      <setting VAR="course_pgain" RANGE="0.1" RC="gain_1_up" TYPE="float"/>
      <setting VAR="pitch_of_roll" RANGE=".2" RC="gain_1_down" TYPE="float"/>
    </mode>
  </rc_control>

  <waypoints>
    <waypoint name="HOME" x="0" y="0"/>
  </waypoints>

  <include name="up_and_down" procedure="circles.xml" x="00" y="100" rotate="0">
    <arg name="bottom" value="GROUND_ALT+50"/>
    <with from="event1" to="bh50.go"/>
  </include>

  <include name="bh50" procedure="bh.xml" x="0" y="200" rotate="0">
   <arg name="height" value="50"/>
   <with from="event1" to="bh30.go"/>
   <with from="event2" to="circlehome"/>
  </include>

  <include name="bh30" procedure="bh.xml" x="0" y="200" rotate="0">
   <arg name="height" value="30"/>
   <with from="event1" to="circlehome"/>
   <with from="event2" to="circlehome"/>
  </include>

  <blocks>
    <block NAME="init">
      <while COND="(!launch)"/>
      <heading VMODE="gaz" GAZ="0.8" PITCH="0.15" COURSE="QFU" UNTIL="(estimator_flight_time > 8)"/>
      <heading CLIMB="3.0" VMODE="climb" PITCH="0.15" COURSE="QFU" UNTIL="(estimator_z > SECURITY_ALT)"/>
      <deroute BLOCK="circlehome"/>
    </block>
    <block NAME="circlehome">
      <exception COND="(RcEvent1())" DEROUTE="up_and_down.climb"/>
      <circle WP="HOME" ALT="GROUND_ALT+50" RADIUS="75"/>
    </block>
  </blocks>
</flight_plan>

