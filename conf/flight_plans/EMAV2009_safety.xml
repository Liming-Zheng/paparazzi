<!DOCTYPE procedure SYSTEM "flight_plan.dtd">

<procedure>
  <waypoints>
    <waypoint lat="52.38252048723831" lon="5.897420494955952" name="_CENTER" alt="100"/>
    <waypoint lat="52.39223341391188" lon="5.891920215186895" name="_G1"/>
    <waypoint lat="52.38457192890880" lon="5.905759083500732" name="_G2"/>
    <waypoint lat="52.37522867761314" lon="5.891055906501672" name="_G3"/>
    <waypoint lat="52.38389131932532" lon="5.876775757075523" name="_G4"/>
    <waypoint lat="52.39502349675812" lon="5.890603491493776" name="_R1"/>
    <waypoint lat="52.38568420330603" lon="5.907529980510587" name="_R2"/>
    <waypoint lat="52.37341656154337" lon="5.888204759419744" name="_R3"/>
    <waypoint lat="52.38371772691826" lon="5.870010280721401" name="_R4"/>
    <waypoint lat="52.38833565818008" lon="5.888958356099608" name="_S1"/>
    <waypoint lat="52.38741511939426" lon="5.896820110526804" name="_S2"/>
    <waypoint lat="52.38344448233852" lon="5.895558989657886" name="_S3"/>
    <waypoint lat="52.38442017389706" lon="5.887661800773984" name="_S4"/>
    <waypoint lat="52.38117866835545" lon="5.897949813109249" name="E1"/>
    <waypoint lat="52.38219156830098" lon="5.890795873256735" name="E2"/>
  </waypoints>

  <sectors>
    <sector name="Red" color="red">
      <corner name="_R1"/>
      <corner name="_R2"/>
      <corner name="_R3"/>
      <corner name="_R4"/>
    </sector>
    <sector name="Green" color="green">
      <corner name="_G1"/>
      <corner name="_G2"/>
      <corner name="_G3"/>
      <corner name="_G4"/>
    </sector>
    <sector name="Search">
      <corner name="_S1"/>
      <corner name="_S2"/>
      <corner name="_S3"/>
      <corner name="_S4"/>
    </sector>
  </sectors>

  <exceptions>
    <exception cond="Or(! InsideGreen(estimator_x, estimator_y), estimator_z > ground_alt + 150)" deroute="Center"/>
  </exceptions>

  <blocks>
    <block name="Center" pre_call="if (And(!kill_throttle, !InsideRed(estimator_x, estimator_y))) kill_throttle=TRUE;">
      <circle wp="_CENTER" radius="DEFAULT_CIRCLE_RADIUS"/>
    </block>
  </blocks>

</procedure>
