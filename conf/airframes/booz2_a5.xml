<airframe name="booz2_a5">

  <servos min="0" neutral="0" max="0xff">
    <servo name="back_right"   no="0" min="0" neutral="0" max="255"/>
    <servo name="back_left"    no="1" min="0" neutral="0" max="255"/>
    <servo name="center_right" no="2" min="0" neutral="0" max="255"/>
    <servo name="center_left"  no="3" min="0" neutral="0" max="255"/>
    <servo name="front_right"  no="4" min="0" neutral="0" max="255"/>
    <servo name="front_left"   no="5" min="0" neutral="0" max="255"/>
  </servos>

  <commands>
    <axis name="PITCH"  failsafe_value="0"/>
    <axis name="ROLL"   failsafe_value="0"/>
    <axis name="YAW"    failsafe_value="0"/>
    <axis name="THRUST" failsafe_value="0"/>
  </commands>

  <section name="BUSS_BLMC" prefix="BUSS_BLMC_">
    <define name="ADDR" value="{ 0x52, 0x54, 0x56, 0x58, 0x5A, 0X5C }"/>
  </section>
 
  <section name="SUPERVISION" prefix="SUPERVISION_">
    <define name="FRONT_ROTOR_CW" value="1"/>
    <define name="MIN_MOTOR" value="2"/>
    <define name="MAX_MOTOR" value="210"/>
    <define name="TRIM_A" value="0"/>
    <define name="TRIM_E" value="0"/>
    <define name="TRIM_R" value="0"/>
  </section>

  <section name="IMU" prefix="IMU_">

    <define name="GYRO_P_CHAN" value="1"/>
    <define name="GYRO_Q_CHAN" value="0"/>
    <define name="GYRO_R_CHAN" value="2"/>

    <define name="GYRO_P_NEUTRAL" value="31489"/>
    <define name="GYRO_Q_NEUTRAL" value="31814"/>
    <define name="GYRO_R_NEUTRAL" value="32752"/>

    <define name="GYRO_P_SENS" value=" 1.01" integer="16"/>
    <define name="GYRO_Q_SENS" value="-1.01" integer="16"/>
    <define name="GYRO_R_SENS" value="-1.01" integer="16"/>
  

    <define name="ACCEL_X_CHAN" value="5"/>
    <define name="ACCEL_Y_CHAN" value="3"/>
    <define name="ACCEL_Z_CHAN" value="4"/>    

    <define name="ACCEL_X_SENS" value="-3.49637365" integer="16"/>
    <define name="ACCEL_Y_SENS" value="-3.48686012" integer="16"/>
    <define name="ACCEL_Z_SENS" value="-3.55363744" integer="16"/>

    <define name="ACCEL_X_NEUTRAL" value="29174"/>
    <define name="ACCEL_Y_NEUTRAL" value="29720"/>
    <define name="ACCEL_Z_NEUTRAL" value="28629"/>
 

    <define name="MAG_X_CHAN" value="0"/>
    <define name="MAG_Y_CHAN" value="1"/>
    <define name="MAG_Z_CHAN" value="2"/>

    <define name="MAG_X_SENS" value="5.20834273" integer="16"/>
    <define name="MAG_Y_SENS" value="-5.22061499" integer="16"/>
    <define name="MAG_Z_SENS" value="-2.69279936" integer="16"/>

    <define name="MAG_X_NEUTRAL" value="-164"/>
    <define name="MAG_Y_NEUTRAL" value="3"/>
    <define name="MAG_Z_NEUTRAL" value="42"/>


   <define name="BODY_TO_IMU_PHI"   value="ANGLE_BFP_OF_REAL(RadOfDeg(0.))"/>
   <define name="BODY_TO_IMU_THETA" value="ANGLE_BFP_OF_REAL(RadOfDeg(0.))"/>
   <define name="BODY_TO_IMU_PSI"   value="ANGLE_BFP_OF_REAL(RadOfDeg(0.))"/>

  </section>


  <makefile>

USER =
HOST = overo
TARGET_DIR = ~

SRC_FMS=fms


include $(PAPARAZZI_SRC)/conf/autopilot/booz2_common.makefile

FLASH_MODE = IAP
lpc_test_spi.ARCHDIR = arm7
lpc_test_spi.ARCH = arm7tdmi
lpc_test_spi.TARGET = lpc_test_spi
lpc_test_spi.TARGETDIR = lpc_test_spi
lpc_test_spi.srcs = $(SRC_FMS)/lpc_test_spi.c
lpc_test_spi.CFLAGS += -DBOARD_CONFIG=\"boards/olimex_lpc_h2148.h\"
lpc_test_spi.CFLAGS += -DPERIPHERALS_AUTO_INIT
lpc_test_spi.CFLAGS += -DUSE_LED
lpc_test_spi.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c
lpc_test_spi.CFLAGS += -DPERIODIC_TASK_PERIOD='SYS_TICS_OF_SEC((1./512.))' -DTIME_LED=1

#
# test BUSS BLDC
#
lpc_test_motors.ARCHDIR = arm7
lpc_test_motors.ARCH = arm7tdmi
lpc_test_motors.TARGET = lpc_test_motors
lpc_test_motors.TARGETDIR = lpc_test_motors

lpc_test_motors.CFLAGS += -DPERIPHERALS_AUTO_INIT
lpc_test_motors.CFLAGS += -DBOARD_CONFIG=\"boards/booz2_v1_0.h\" -I$(SRC_BOOZ) -I$(SRC_BOOZ_ARCH)
lpc_test_motors.srcs += $(SRC_BOOZ_TEST)/booz2_test_buss_bldc_hexa.c
lpc_test_motors.CFLAGS += -DUSE_LED
lpc_test_motors.CFLAGS += -DPERIODIC_TASK_PERIOD='SYS_TICS_OF_SEC((1./512.))' -DTIME_LED=1
lpc_test_motors.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c

lpc_test_motors.CFLAGS += -DUSE_UART1 -DUART1_BAUD=B57600
lpc_test_motors.srcs += $(SRC_ARCH)/uart_hw.c

lpc_test_motors.CFLAGS += -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_DEVICE=Uart1 
lpc_test_motors.srcs += downlink.c pprz_transport.c

lpc_test_motors.CFLAGS += -DDATALINK=PPRZ -DPPRZ_UART=Uart1
lpc_test_motors.srcs += $(SRC_BOOZ)/booz2_datalink.c

lpc_test_motors.CFLAGS += -DUSE_I2C0 -DI2C0_SCLL=150 -DI2C0_SCLH=150 -DI2C0_VIC_SLOT=10
lpc_test_motors.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c



#
#
#
overo_test_telemetry.ARCHDIR = omap
overo_test_telemetry.srcs=$(SRC_FMS)/overo_test_telemetry.c
overo_test_telemetry.CFLAGS += -I$(GLIB_INC)
overo_test_telemetry.LDFLAGS += -L$(GLIB_LIB) -lglib-2.0

#
#
#
overo_test_spi.ARCHDIR = omap
overo_test_spi.srcs=$(SRC_FMS)/overo_test_spi.c



#ap.ARCHDIR = $(ARCHI)
#ap.LDFLAGS = -lm -levent -lrt
#ap.CFLAGS += -I$(SRC_FMS)
#ap.srcs=$(SRC_FMS)/fms_test_datalink.c
#ap.CFLAGS += -DDOWNLINK
#ap.CFLAGS += -DDOWNLINK_TRANSPORT=UdpTransport
#ap.srcs += $(SRC_FMS)/fms_network.c
#ap.srcs += $(SRC_FMS)/udp_transport.c
#ap.srcs += downlink.c




  </makefile>

</airframe>

