<?xml version="1.0"?>

<protocol>
 <!-- messages from modem or sim to server -->
 <class name="telemetry_ap" ID="0x40">
 
   <message name="BOOT" id="1">
     <field name="version" type="uint16"></field>
   </message>

   <message name="CALIB_START" ID="2">
   </message>

   <message name="CALIB_CONTRAST" ID="3">
     <field name="adc" type="int16"></field>
   </message>

   <message name="TAKEOFF" ID="4">
     <field name="cpu_time" type="uint16" unit="s"></field>
   </message>

  <message name="RAD_OF_IR" ID="5">
    <field name="ir" type="int16"></field>
    <field name="rad" type="int16" unit="decideg"></field>
    <field name="rad_of_ir" type="float" format="%.4f"></field>
  </message>

  <message name="ATTITUDE" ID="6" period="0.5" >
    <field name="phi" type="int8" unit="deg"></field>
    <field name="psi" type="int8" unit="deg"></field>
    <field name="theta" type="int8" unit="deg"></field>
  </message>

  <message name="ADC" ID="7" period="0.5" >
    <field name="roll" type="int16"></field>
    <field name="pitch" type="int16"></field>
  </message>

  <message name="GPS" ID="8">
    <field name="mode"   type="uint8" unit="byte_mask"></field>
    <field name="utm_east"  type="int32" unit="cm"></field>
    <field name="utm_north"  type="int32" unit="cm"></field>
    <field name="course" type="int16" unit="decideg"></field>
    <field name="alt"    type="int32" unit="cm"></field>
    <field name="speed"  type="uint16" unit="cm/s"></field>
    <field name="climb"  type="int16" unit="cm/s"></field>
    <field name="itow"  type="uint32" unit="ms"></field>
    <field name="utm_zone"  type="uint8"></field>
  </message>

  <message name="NAVIGATION_REF" ID="0x09" period="9" >
    <field name="utm_east"  type="int32" unit="m"></field>
    <field name="utm_north" type="int32" unit="m"></field>
    <field name="utm_zone" type="uint8"></field>
  </message>

  <message name="NAVIGATION" ID="10">
    <field name="cur_block" type="uint8"></field>
    <field name="cur_stage" type="uint8"></field>
    <field name="pos_x" type="int16" unit="m"></field>
    <field name="pos_y" type="int16" unit="m"></field>
    <field name="desired_course" type="int16" unit="decideg"></field>
    <field name="dist2_wp" type="float" format="%.1f" unit="m^2"></field>
    <field name="dist2_home" type="float" format="%.1f" unit="m^2"></field>
  </message>

  <message name="PPRZ_MODE" ID="11" period="5" >
    <field name="ap_mode" type="uint8" values="MANUAL|AUTO1|AUTO2|HOME"/>
    <field name="ap_gaz" type="uint8" values="MANUAL|AUTO_GAZ|AUTO_CLIMB|AUTO_ALT"/>
    <field name="ap_lateral" type="uint8" values="MANUAL|ROLL_RATE|ROLL|COURSE"/>
    <field name="ap_horizontal" type="uint8" values="WAYPOINT|ROUTE|CIRCLE"/>
    <field name="if_calib_mode" type="uint8" values="NONE|DOWN|UP"/>
    <field name="mcu1_status" type="uint8" values="LOST|OK|REALLY_LOST"/>	
    <field name="lls_calib" type="uint8" values="LLS_CALIB_MODE_OFF|LLS_CALIB_MODE_ON"/>
  </message>

  <message name="BAT" ID="12" period="2" >
    <field name="desired_gaz" type="int16" unit="pprz"></field>
    <field name="voltage" type="uint8" unit="1e-1V"></field>
    <field name="flight_time" type="uint16" unit="s"></field>
    <field name="status_battery" type="uint8" values="LOW|OK"></field>
    <field name="block_time" type="uint16" unit="s"></field>
    <field name="stage_time" type="uint16" unit="s"></field>
    <field name="energy" type="uint16" unit="mAh"/>
  </message>

  <message name="DEBUG" ID="13" period="5" >
    <field name="i2c_nb_err" type="uint8"></field>	
    <field name="i2c_mcu1_nb_err" type="uint8"></field>
    <field name="modem_nb_err" type="uint8"></field>
    <field name="gps_nb_err" type="uint8"></field>
    <field name="ppm_rate" type="uint8"></field>
  </message> 

  <message name="CALIBRATION" ID="14" period="2">
    <field name="climb_sum_err" type="float" format="%.1f"></field>
    <field name="climb_pgain" type="float" format="%.3f"></field> 
    <field name="course_pgain" type="float" format="%.3f"></field>
  </message>

  <message name="SETTINGS" ID="15" period="0.5">
    <field name="slider_1_val" type="float"></field>
    <field name="slider_2_val" type="float"></field>
  </message>

  <message name="DESIRED" ID="16" period="1">
    <field name="roll" type="float" format="%.2f"/>
    <field name="pitch" type="float" format="%.2f"/>
    <field name="desired_x" type="float" format="%.0f"/>
    <field name="desired_y" type="float" format="%.0f"/>
    <field name="desired_altitude" type="float" format="%.0f"/>
    <field name="desired_climb" type="float" format="%.1f"></field>
  </message>

  <message name="IMU" ID="17">
    <field name="gyro_x" type="float"/>
    <field name="gyro_y" type="float"/>
    <field name="gyro_z" type="float"/>
    <field name="accel_x" type="float"/>
    <field name="accel_y" type="float"/>
    <field name="accel_z" type="float"/>
  </message>

  <message name="KALMAN" ID="18">
    <field name="phi"        type="float" format="%.3f"/>
    <field name="phi_dot"    type="float" format="%.3f"/>
    <field name="phi_bias"   type="float" format="%.3f"/>
    <field name="theta"      type="float" format="%.3f"/>
    <field name="theta_dot"  type="float" format="%.3f"/>
    <field name="theta_bias" type="float" format="%.3f"/>
  </message>

   <message name="IDENT" ID="19" period="10">
     <field name="id" type="uint8"/>
   </message>

  <message name="CAM" ID="20">
     <field name="phi" type="int8" unit="deg"/>
     <field name="theta" type="int8" unit="deg"/>
     <field name="target_x" type="int16" unit="m"/>
     <field name="target_y" type="int16" unit="m"/>
  </message>
	
  <message name="CIRCLE" ID="21">
     <field name="center_x" type="int16" unit="m"/>
     <field name="center_y" type="int16" unit="m"/>
     <field name="radius" type="int16" unit="m"/>
     </message>
	
   <message name="SEGMENT" ID="22">
      <field name="segment_x_1" type="int16" unit="m"/>
      <field name="segment_y_1" type="int16" unit="m"/>
      <field name="segment_x_2" type="int16" unit="m"/>
      <field name="segment_y_2" type="int16" unit="m"/>
  </message>

  <message name="DOWNLINK_STATUS" ID="23">
    <field name="run_time" type="uint32" unit="s"></field>
    <field name="rx_bytes" type="uint32"></field>
    <field name="rx_msgs" type="uint32"></field>
    <field name="rx_err" type="uint32"></field>
    <field name="rx_bytes_rate" type="float" format="%.1f"></field>
    <field name="rx_msgs_rate" type="float" format="%.1f"></field>
  </message>

  <message name="MODEM_STATUS" ID="24">
    <field name="detected" type="uint8"></field>
    <field name="valim" type="float" format="%.1f"></field>
    <field name="cd" type="uint8"></field>
    <field name="nb_byte" type="uint32"></field>
    <field name="nb_msg" type="uint32"></field>
    <field name="nb_err" type="uint32"></field>
  </message>

  <message name="SVINFO" id="25">
     <field name="chn" type="uint8"/>
     <field name="SVID" type="uint8"/>
     <field name="Flags" type="uint8"/>
     <field name="QI" type="int8"/>
     <field name="CNO" type="uint8" unit="dbHz"/>
     <field name="Elev" type="int8" unit="deg"/>
     <field name="Azim" type="int16" unit="deg"/>
  </message>
</class>

<class name="telemetry_fbw" ID="0X41">

  <message name="PPM" ID="0x01" period="1">
    <field name="nb_channels" type="uint8"/>
    <field name="sync_len" type="uint8"/>
    <field name="ppm01" type="uint16" unit="us"/>
    <field name="ppm02" type="uint16" unit="us"/>
    <field name="ppm03" type="uint16" unit="us"/>
    <field name="ppm04" type="uint16" unit="us"/>
    <field name="ppm05" type="uint16" unit="us"/>
    <field name="ppm06" type="uint16" unit="us"/>
    <field name="ppm07" type="uint16" unit="us"/>
    <field name="ppm08" type="uint16" unit="us"/>
    <field name="ppm09" type="uint16" unit="us"/>
    <field name="ppm10" type="uint16" unit="us"/>
    <field name="ppm11" type="uint16" unit="us"/>
    <field name="ppm12" type="uint16" unit="us"/>
  </message>

  <message name="RC" ID="0x02" period="1">
    <field name="nb_channels" type="uint8"/>
    <field name="pprz01" type="int16" unit="pprz"/>
    <field name="pprz02" type="int16" unit="pprz"/>
    <field name="pprz03" type="int16" unit="pprz"/>
    <field name="pprz04" type="int16" unit="pprz"/>
    <field name="pprz05" type="int16" unit="pprz"/>
    <field name="pprz06" type="int16" unit="pprz"/>
    <field name="pprz07" type="int16" unit="pprz"/>
    <field name="pprz08" type="int16" unit="pprz"/>
    <field name="pprz09" type="int16" unit="pprz"/>
    <field name="pprz10" type="int16" unit="pprz"/>
    <field name="pprz11" type="int16" unit="pprz"/>
    <field name="pprz12" type="int16" unit="pprz"/>
  </message>

  <message name="SERVOS" ID="0x03" period="1">
    <field name="nb_servos" type="uint8"/>
    <field name="ser01" type="uint16" unit="us"/>
    <field name="ser02" type="uint16" unit="us"/>
    <field name="ser03" type="uint16" unit="us"/>
    <field name="ser04" type="uint16" unit="us"/>
    <field name="ser05" type="uint16" unit="us"/>
    <field name="ser06" type="uint16" unit="us"/>
    <field name="ser07" type="uint16" unit="us"/>
    <field name="ser08" type="uint16" unit="us"/>
    <field name="ser09" type="uint16" unit="us"/>
    <field name="ser10" type="uint16" unit="us"/>
  </message>

  <message name="FBW_STATUS" ID="0x04" period="1">
    <field name="nb_spi_err" type="uint8"/>
    <field name="rc_status" type="uint8" values="OK|LOST|REALLY_LOST"/>
    <field name="mode" type="uint8" values="MANUAL|AUTO|FAILSAFE"/>
  </message>
</class>




<class name="ground" ID="0x42">
  <message name="NEW_AIRCRAFT" ID="1">
    <field name="ac_id" type="string"/>
  </message>

  <message name="AIRCRAFT_DIE" ID="2">
    <field name="ac_id" type="string"/>
  </message>

  <message name="AIRCRAFTS" ID="3">
    <field name="ac_list" type="string" format="csv"/>
  </message>

  <message name="AIRCRAFTS_REQ" ID="4">
  </message>

  <message name="SELECTED" ID="5">
    <field name="aicraft_id" type="string"/>
  </message>

  <message name="SELECTED_REQ" ID="6">
  </message>

  <message name="WIND_REQ" ID="7">
  </message>

  <message name="WIND" ID="8">
    <field name="dir" type="float"   unit="deg_wind"/>
    <field name="speed" type="float" unit="m/s"/>
    <field name="mean_aspeed" type="float" unit="m/s"/>
    <field name="stddev" type="float" unit="m/s"/>
  </message>

  <message name="CONFIG_REQ" ID="9">
    <field name="ac_id" type="string"/>
  </message>

  <message name="CONFIG" ID="10">
    <field name="ac_id" type="string"/>
    <field name="flight_plan" type="string" unit="url"/>
    <field name="airframe" type="string" unit="url"/>
    <field name="radio" type="string" unit="url"/>
  </message>

  <message name="FLIGHT_PARAM" ID="11">
    <field name="ac_id" type="string"/>
    <field name="roll"    type="float" unit="deg"/>
    <field name="pitch"   type="float" unit="deg"/>
    <field name="east"    type="float" unit="m"/>
    <field name="north"   type="float" unit="m"/>
    <field name="speed"   type="float" unit="m/s"/>
    <field name="course" type="float" unit="deg" format="%.1f"/>
    <field name="alt"     type="float" unit="m"/>
    <field name="climb"   type="float" unit="m/s"/>
  </message>

  <message name="AP_STATUS" ID="12">
    <field name="ac_id" type="string"/>
    <field name="ap_mode" type="string" values="MANUAL|AUTO1|AUTO2|HOME"/>
    <field name="lat_mode" type="string" values="MANUAL|ROLL_RATE|ROLL|COURSE"/>
    <field name="horiz_mode" type="string" values="WAYPOINT|ROUTE|CIRCLE"/>
    <field name="gaz_mode" type="string" values="MANUAL|GAZ|CLIMB|ALT"/>
    <field name="gps_mode" type="string" values="NOFIX|DRO|2D|3D|GPSDRO"/>
    <field name="flight_time" type="uint32" />
  </message>

  <message name="NAV_STATUS" ID="13">
    <field name="ac_id" type="string"/>
    <field name="cur_block"   type="uint8"/>
    <field name="cur_stage"   type="uint8"/>
    <field name="block_time"  type="uint32"/>
    <field name="stage_time"  type="uint32"/>
    <field name="target_east" type="float" unit="m"/>
    <field name="target_north" type="float" unit="m"/>
    <field name="target_climb"   type="float" unit="m/s"/>
    <field name="target_alt"     type="float" unit="m"/>
    <field name="target_course" type="float" unit="deg"/>
  </message>

  <message name="CAM_STATUS" ID="14">
     <field name="ac_id" type="string"/>
     <field name="cam_east" type="float" unit="m" format="%.1f"/>
     <field name="cam_north" type="float" unit="m" format="%.1f"/>
     <field name="target_east" type="float" unit="m"/>
     <field name="target_north" type="float" unit="m"/>
  </message>

  <message name="ENGINE_STATUS" ID="15">
    <field name="ac_id" type="string"/>
    <field name="throttle" type="float" unit="%"  format="%.1f"/>
    <field name="rpm"      type="float" unit="rpm"  format="%.1f"/>
    <field name="temp"     type="float" unit="celcius"/>
    <field name="bat"      type="float" unit="V"/>
    <field name="amp"      type="float" unit="A"/>
    <field name="energy"   type="float" unit="Wh"/>
  </message>

  <message name="SVSINFO" ID="16">
      <field name="ac_id" type="string"/>
      <field name="svid"  type="string" format="csv"/>
      <field name="flags" type="string" format="csv"/>
      <field name="qi"    type="string" format="csv" values="IDLE|SEARCH|SEARCH|UNUSABLE|CODELOCK|CARRIERLOCK|CARRIERLOCK|RECEIVING"/>
      <field name="cno"   type="string" format="csv" unit="dbHz"/>
      <field name="elev"  type="string" format="csv" unit="deg"/>
      <field name="azim"  type="string" format="csv" unit="deg"/>
  </message>

  <message name="FLY_BY_WIRE" id="17">
    <field name="ac_id" type="string"/>
    <field name="rc_status" type="string" values="OK|LOST|REALLY_LOST"/>
    <field name="rc_mode" type="string" values="MANUAL|AUTO|FAILSAFE"/>
  </message>

  <message name="INFRARED" id="18">
    <field name="ac_id" type="string"/>
    <field name="gps_hybrid_mode" type="uint8" values="OFF|ON"/>
    <field name="gps_hybrid_factor" type="float"/>
    <field name="contrast_status" type="string" values="DEFAULT|WAITING|SET"/>
    <field name="contrast_value" type="int16"/>
  </message>

  <message name="INFLIGH_CALIB" id="19">
    <field name="ac_id" type="string"/>
    <field name="if_mode" type="string" values="OFF|DOWN|UP"></field>
    <field name="if_value1" type="float"></field>
    <field name="if_value2" type="float"></field>
  </message>

  <message name="WORLD_ENV" id="20">
    <field name="wind_east" type="float" unit="m/s" format="%.1f"/>
    <field name="wind_north" type="float" unit="m/s" format="%.1f"/>
    <field name="ir_contrast" type="float"/>
    <field name="time_scale" type="float"/>
  </message>

  <message name="WORLD_ENV_REQ" id="21"/>

  <message name="CIRCLE_STATUS" ID="22">
     <field name="ac_id" type="string"/>
     <field name="circle_east" type="float" unit="m"/>
     <field name="circle_north" type="float" unit="m"/>
     <field name="radius" type="int16" unit="m"/>
     </message>
	
   <message name="SEGMENT_STATUS" ID="23">
      <field name="ac_id" type="string"/>
      <field name="segment1_east" type="float" unit="m"/>
      <field name="segment1_north" type="float" unit="m"/>
      <field name="segment2_east" type="float" unit="m"/>
      <field name="segment2_north" type="float" unit="m"/>
  </message>
</class>

</protocol>
